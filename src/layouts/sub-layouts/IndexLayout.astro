---
import Layout from "../Layout.astro";
import Navbar from "../../components/elements/Navbar.astro";
import Footer from "../../components/elements/Footer.astro";
import Soon from "../../components/sections/Soon.astro";
import Tools from "../../components/elements/Tools.astro";

export interface Props {
    title: string;
}

const { title } = Astro.props;

let inMaintenance =
    import.meta.env.NODE_ENV === "production" ||
    Astro.cookies.get("maintenance")?.value === "1";

export const prerender = true;
---

<Layout title={inMaintenance ? "Soon..." : title}>
    {
        inMaintenance ? (
            <section>
                {import.meta.env.NODE_ENV !== "production" ? (
                    <Tools inMaintenance={true} />
                ) : null}
                <Soon />
            </section>
        ) : (
            <section>
                {import.meta.env.NODE_ENV !== "production" ? (
                    <Tools inMaintenance={false} />
                ) : null}
                <Navbar />
                <slot />
                <Footer />
            </section>
        )
    }
</Layout>
